# マンガでわかる「正規表現」

## 付録 正規表現の一覧

### 1文字にマッチ

| 記号     | 意味          |
|----------|-------------|
| . (ピリオド) | なにか1文字      |
| [abc]    | これら1文字      |
| [^abc]   | これら以外の1文字 |
| [a-z]    | この範囲の1文字  |

### メタ文字にマッチ

| 記号    | 意味                             |
|---------|----------------------------------|
| \d      | 数字1文字                        |
| \D      | 数字以外の1文字                   |
| \w      | 英数字・アンダースコア1文字              |
| \W      | 英数字・アンダースコア以外の1文字         |
| \s      | 空白（半角スペース、タブ、改行）1文字      |
| \S      | 空白（半角スペース、タブ、改行）以外の1文字 |
| \t      | タブ                               |
| \n      | 改行（LF）                         |
| \r      | 改行（CR）                         |
| \メタ文字 | メタ文字そのものにマッチ                   |

### メタ文字: . * + ? \ | ^ $ [] {}

### どれかの単語にマッチ

| 記号   | 意味     |
|--------|--------|
| (a\|b) | これらの単語 |

### 先頭、末尾にマッチ

| 記号 | 意味    |
|------|-------|
| ^    | 行の先頭 |
| $    | 行の末尾 |

### くり返しにマッチ

| 記号  | 意味                    |
|-------|-----------------------|
| *     | 0回以上くり返す（なくてもよい）    |
| +     | 1回以上くり返す（1回は必ずある） |
| ?     | 0回か1回出現する           |
| {n}   | n回出現                 |
| {n,}  | n回以上くり返す            |
| {n,m} | n回以上m回以下くり返す     |

### 最短マッチ

| 記号 | 意味                   |
|------|----------------------|
| *?   | マッチするもので最も短い範囲にマッチ |

### キャプチャでマッチ

| 記号      | 意味                            |
|-----------|-------------------------------|
| (expr) \n | ()でマッチした文字を、\nの箇所でもう一度マッチ |

### 先読み、後読み

| 記号     | 意味                                |
|----------|-----------------------------------|
| (?=...)  | 【先読み】後ろにこのパターンがあるときだけ●でマッチする     |
| (?!...)  | 【否定先読み】後ろにこのパターンがないときだけ●でマッチする |
| (?<=...) | 【後読み】前にこのパターンがあるときだけ●でマッチする      |
| (?<!...) | 【否定後読み】前にこのパターンがないときだけ●でマッチする  |

## 正規表現の具体例一覧

### 「だ。」「である。」を、「です。」に変換

- 「だ。」や、「である。」にマッチ
- 「です。」に変換

正規表現: `(だ|である)。`
置換する文字列: `です。`

### ダブルクォーテーションをカギカッコに変換

- `"` とどんな文字でもいい、ただし最短にマッチ + `"`
- `「` + キャプチャした文字列 + `」` に変換

正規表現: `"(.*?)"`
置換する文字列: `「$1」`

### カンマ区切りの「¥金額」を「金額円」に変換

- 3桁以下の数字はカンマはつかない
- 4桁以上の数字は、下から3桁ごとにカンマがくり返しつく
- 金額の先頭に¥、末尾に円がつく
- キャプチャした文字列+円に変換

正規表現: `¥(\d{1,3}(,\d{3})*)`
置換する文字列: `$1円`

### 時刻にマッチ（簡単バージョン）

- 数字2桁 + : + 数字2桁 + : + 数字2桁

正規表現: `\d{2}:\d{2}:\d{2}`

### 時刻にマッチ（詳しいバージョン）

- 数字2桁 + : + 数字2桁 + : + 数字2桁
- 時の値は「00〜23」、分の値は「00〜59」、秒の値は「00〜59」

正規表現: `([01]\d|2[0-3]):([0-5]\d):([0-5]\d)`

### 日付にマッチ（簡単バージョン）

- 数字4桁 + /のどれか + 数字2桁 + /のどれか + 数字2桁

正規表現: `\d{4}[/\-\.]\d{2}[/\-\.]\d{2}`

### 日付にマッチ（詳しいバージョン）

- 数字4桁 + /のどれか + 数字2桁 + /のどれか + 数字2桁
- 月の値は「01〜12」、日の値は「00〜31」

正規表現: `\d{4}[/\-\.](?:0[1-9]|1[0-2])[/\-\.](?:0[1-9]|[12]\d|3[01])`

### アルファベットか数字で4〜8文字のときだけマッチ

- アルファベットか数字（混ざれてもいい）で4〜8文字

正規表現: `[a-zA-Z0-9]{4,8}`

### 郵便番号のチェック

- 3桁の数字 + - + 4桁の数字

正規表現: `\d{3}-\d{4}`

### メールアドレスのチェック

- 1文字以上の英数字か-,+ @ + 1文字以上の英数字か-,. + 1文字以上のアルファベット

正規表現: `[a-zA-Z0-9.+_-]+@[a-zA-Z0-9.-]+[a-zA-Z]{2,}`

### HTMLの要素にマッチ

- < + 1文字以上の英数字のタグ名 + > + どんな文字でも（なくても可） + < + 同じタグ名 + >

正規表現: `<(\w+)>.*?</\1>`

### HTMLの空っぽの要素にマッチ

- < + 1文字以上の英数字のタグ名 + > + 空っぽ + < + 同じタグ名 + >

正規表現: `<(\w+)></\1>`

### URLにマッチ

- <http://かhttps://で始まる。>
- アルファベット数字、-#$%&'*+/=?^_`{|}~の文字が続く。

正規表現: `https?://[\w\-#$%&'*+./:=?^_`{|}~]+`

### URLのホスト・ドメイン名にマッチ

- <http://かhttps://で始まる。>
- ホスト・ドメイン名で使える文字は、アルファベット数字、-
- 後ろの/より前までをファイル名は含める場合もある。

正規表現: `(?<=https?://)[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*`

## 第一章

省略

## 第二章 謎の文字列にマッチ

### なにか1文字にマッチ

一番簡単な正規表現は.(ピリオド)。
なにか1文字にマッチする記号。

---
検索ワード ア.ス

==アリス== ← 一致する
==アイス== ← 一致する
==アマリリス==

検索ワード ア...ス

アリス
アイス
==アマリリス==　← 一致する

---
